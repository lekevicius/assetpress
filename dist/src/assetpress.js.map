{"version":3,"file":"assetpress.js","sourceRoot":"","sources":["../../src/assetpress.ts"],"names":[],"mappings":";AAAA,6BAA8B;AAC9B,2BAA4B;AAC5B,0BAA2B;AAI3B,6BAA8B;AAE9B,+BAAgC;AAEhC,6CAA8C;AAC9C,qCAAsC;AACtC,+CAAyC;AAEzC,GAAG,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAE/B,IAAI,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AAE9B,OAAO,GAAG,EAAE,CAAC;AAEb,QAAQ,GAAG;IACT,OAAO,EAAE,KAAK;IACd,KAAK,EAAE,KAAK;IACZ,cAAc,EAAE,QAAQ;IACxB,eAAe,EAAE,KAAK;IACtB,EAAE,EAAE,KAAK;IACT,gBAAgB,EAAE,KAAK;IACvB,UAAU,EAAE,KAAK;IACjB,cAAc,EAAE,KAAK;IACrB,UAAU,EAAE,KAAK;IACjB,OAAO,EAAE,KAAK;IACd,SAAS,EAAE,KAAK;IAChB,SAAS,EAAE,KAAK;IAChB,SAAS,EAAE,KAAK;IAChB,SAAS,EAAE,KAAK;CACjB,CAAC;AAEF,mBAAwB,aAAa,EAAE,QAAQ;IAC7C,IAAI,CAAC,EAAE,YAAY,EAAE,cAAc,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,YAAY,EAAE,cAAc,CAAC;IACjJ,EAAE,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC;QACrB,QAAQ,GAAG,KAAK,CAAC;IACnB,CAAC;IACD,OAAO,GAAG,CAAC,CAAC,QAAQ,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;IAC9C,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QACd,QAAQ,GAAG,cAAY,CAAC,CAAC;IAC3B,CAAC;IACD,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;IAC1D,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;IAC1C,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;IACxC,KAAK,CAAC,KAAK,GAAG,cAAY,CAAC,CAAC;IAC5B,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,OAAO,IAAI,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;QACzI,EAAE,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;YAC3B,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACvC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;YAC9D,CAAC;YACD,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACtC,GAAG,GAAG,OAAO,CAAC,cAAc,CAAC;gBAC7B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC3C,YAAY,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;oBACtB,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBAC7C,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,OAAO,CAAC,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACvD,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;YACjD,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;gBACtC,IAAI,GAAG,OAAO,CAAC,cAAc,CAAC;gBAC9B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC9C,YAAY,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;oBACvB,YAAY,CAAC,QAAQ,GAAG,YAAY,CAAC,GAAG,CAAC;gBAC3C,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,OAAO,CAAC,cAAc,CAAC,QAAQ,GAAG,YAAY,CAAC,GAAG,CAAC;YACrD,CAAC;QACH,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YACtC,IAAI,GAAG,OAAO,CAAC,cAAc,CAAC;YAC9B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC9C,YAAY,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBACvB,YAAY,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;YACzC,CAAC;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,OAAO,CAAC,cAAc,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;QACnD,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YACtC,IAAI,GAAG,OAAO,CAAC,cAAc,CAAC;YAC9B,OAAO,GAAG,EAAE,CAAC;YACb,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC9C,YAAY,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBACvB,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACzC,CAAC;YACD,MAAM,CAAC,OAAO,CAAC;QACjB,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;YAC9C,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC5C,CAAC;IACH,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,cAAc,GAAG;YACf,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;YAC5B,OAAO,EAAE,OAAO,CAAC,OAAO;SACzB,CAAC;QACF,cAAc,CAAC,MAAM,GAAG,cAAc,CAAC;QACvC,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;YACzB,MAAM,GAAG,CAAC,YAAY,EAAE,YAAY,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,eAAe,EAAE,eAAe,EAAE,aAAa,CAAC,CAAC;QAC/H,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,GAAG,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAAC;QAC7C,CAAC;QACD,cAAc,CAAC,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;QAChF,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;YACvB,OAAO,cAAc,CAAC,UAAU,CAAC;QACnC,CAAC;QACD,EAAE,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC7B,cAAc,CAAC,OAAO,GAAG;gBACvB,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,GAAG,EAAE,OAAO,CAAC,gBAAgB,CAAC;gBACzE,KAAK,EAAE,OAAO,CAAC,KAAK;aACrB,CAAC;QACJ,CAAC;QACD,cAAc,CAAC,MAAM,GAAG;YACtB,WAAW,EAAE,OAAO,CAAC,eAAe;YACpC,KAAK,EAAE,OAAO,CAAC,KAAK;SACrB,CAAC;QACF,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACpC,CAAC;AACH,CAAC;;AAtFD,4BAsFC;AAAA,CAAC;AAEF,eAAe,GAAG,UAAS,cAAc,EAAE,QAAQ;IACjD,IAAI,cAAc,EAAE,gBAAgB,EAAE,UAAU,EAAE,YAAY,EAAE,aAAa,EAAE,WAAW,EAAE,kBAAkB,EAAE,wBAAwB,EAAE,wBAAwB,CAAC;IACnK,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,QAAQ,EAAE,cAAc,CAAC,MAAM,CAAC,CAAC;IACzF,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC1C,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,gBAAgB,GAAG,cAAc,CAAC,MAAM,GAAG,oBAAoB,CAAC,CAAC;QACtF,MAAM,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IACD,YAAY,GAAG;QACb,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,GAAG,YAAY,CAAC;QAC9H,oBAAoB,EAAE,IAAI;QAC1B,KAAK,EAAE,OAAO,CAAC,KAAK;KACrB,CAAC;IACF,EAAE,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;QAC1B,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACtC,YAAY,GAAG;gBACb,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,QAAQ,EAAE,cAAc,CAAC,MAAM,CAAC;gBAC7E,KAAK,EAAE,OAAO,CAAC,KAAK;aACrB,CAAC;QACJ,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,WAAW,IAAI,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC9F,YAAY,GAAG,cAAc,CAAC,MAAM,CAAC;YACrC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,QAAQ,EAAE,cAAc,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;YACxG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;gBAClC,YAAY,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;YACrC,CAAC;QACH,CAAC;IACH,CAAC;IACD,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;QACvB,YAAY,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;IAC/C,CAAC;IACD,cAAc,CAAC,MAAM,GAAG,YAAY,CAAC;IACrC,EAAE,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAClG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,+CAA+C,CAAC,CAAC;QACtE,MAAM,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IACD,wBAAwB,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC;IACvC,kBAAkB,GAAG,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC;IAC1E,wBAAwB,GAAG,kBAAkB,GAAG,QAAQ,CAAC;IACzD,EAAE,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;QACtD,EAAE,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,EAAE,wBAAwB,CAAC,CAAC;IAC/D,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,KAAK,SAAS,CAAC,CAAC,CAAC;QAC3E,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAC/B,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,0FAA0F,CAAC,CAAC;YACjH,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;YAClC,MAAM,CAAC,QAAQ,EAAE,CAAC;QACpB,CAAC;QACD,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,oCAAoC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,kBAAkB,GAAG,QAAQ,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,EAAE;YACnK,MAAM,EAAE,CAAC,cAAc,CAAC,OAAO;SAChC,CAAC,CAAC;IACL,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,6FAA6F,CAAC,CAAC;QACpH,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;QAClC,MAAM,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IACD,EAAE,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;QAC3B,aAAa,GAAG;YACd,MAAM,EAAE,wBAAwB;YAChC,oBAAoB,EAAE,GAAG;YACzB,kBAAkB,EAAE,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,MAAM,EAAE,oBAAoB,CAAC;YACjF,OAAO,EAAE;gBACP,OAAO,EAAE,cAAc,CAAC,OAAO;gBAC/B,KAAK,EAAE,KAAK;aACb;SACF,CAAC;QACF,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACvC,aAAa,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,QAAQ,EAAE,cAAc,CAAC,OAAO,CAAC,CAAC;QACvG,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,aAAa,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,QAAQ,EAAE,cAAc,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YACjH,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;gBAC3C,aAAa,CAAC,OAAO,CAAC,KAAK,GAAG,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC;YAC7D,CAAC;QACH,CAAC;QACD,kBAAQ,CAAC,aAAa,CAAC,MAAM,EAAE,aAAa,CAAC,oBAAoB,EAAE,aAAa,CAAC,kBAAkB,EAAE,aAAa,CAAC,OAAO,CAAC,CAAC;QAC5H,EAAE,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;YAC3B,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,mBAAmB,GAAG,aAAa,CAAC,kBAAkB,GAAG,KAAK,CAAC,CAAC;QACvF,CAAC;IACH,CAAC;IACD,EAAE,CAAC,CAAC,cAAc,CAAC,UAAU,IAAI,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACvE,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;YAClC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,6FAA6F,CAAC,CAAC;YACpH,cAAc,CAAC,UAAU,CAAC,EAAE,GAAG,KAAK,CAAC;QACvC,CAAC;QACD,EAAE,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE,KAAK,KAAK,IAAI,cAAc,CAAC,UAAU,CAAC,WAAW,IAAI,cAAc,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,CAAC;YAClI,cAAc,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,WAAW,CAAC,GAAG,WAAW,CAAC;QACvG,CAAC;QACD,gBAAgB,GAAG;YACjB,EAAE,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC3B,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,2BAA2B,GAAG,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC;YACnF,CAAC;YACD,MAAM,CAAC,gBAAgB,CAAC,cAAc,EAAE,kBAAkB,EAAE,QAAQ,CAAC,CAAC;QACxE,CAAC,CAAC;QACF,MAAM,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;YACrC,KAAK,SAAS;gBACZ,cAAc,GAAG;oBACf,OAAO,EAAE,cAAc,CAAC,OAAO;oBAC/B,KAAK,EAAE,cAAc,CAAC,MAAM,CAAC,KAAK;oBAClC,IAAI,EAAE,cAAc,CAAC,UAAU,CAAC,WAAW;oBAC3C,OAAO,EAAE,cAAc,CAAC,UAAU,CAAC,cAAc;iBAClD,CAAC;gBACF,MAAM,CAAC,iBAAc,CAAC,wBAAwB,EAAE,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,cAAc,EAAE,gBAAgB,CAAC,CAAC;YACvH,KAAK,KAAK;gBACR,UAAU,GAAG;oBACX,OAAO,EAAE,cAAc,CAAC,OAAO;oBAC/B,KAAK,EAAE,cAAc,CAAC,MAAM,CAAC,KAAK;oBAClC,OAAO,EAAE,cAAc,CAAC,UAAU,CAAC,UAAU;oBAC7C,OAAO,EAAE,cAAc,CAAC,UAAU,CAAC,UAAU;oBAC7C,YAAY,EAAE,cAAc,CAAC,UAAU,CAAC,eAAe;oBACvD,YAAY,EAAE,cAAc,CAAC,UAAU,CAAC,eAAe;oBACvD,UAAU,EAAE,cAAc,CAAC,UAAU,CAAC,aAAa;oBACnD,UAAU,EAAE,cAAc,CAAC,UAAU,CAAC,aAAa;oBACnD,QAAQ,EAAE,cAAc,CAAC,UAAU,CAAC,WAAW;iBAChD,CAAC;gBACF,MAAM,CAAC,aAAU,CAAC,wBAAwB,EAAE,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,UAAU,EAAE,gBAAgB,CAAC,CAAC;QACjH,CAAC;IACH,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,oBAAoB,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACpG,EAAE,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC3B,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,kBAAkB,GAAG,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC,CAAC;YACnE,CAAC;YACD,MAAM,CAAC,gBAAgB,CAAC,cAAc,EAAE,kBAAkB,EAAE,QAAQ,CAAC,CAAC;QACxE,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;YAClC,MAAM,CAAC,QAAQ,EAAE,CAAC;QACpB,CAAC;IACH,CAAC;AACH,CAAC,CAAC;AAEF,gBAAgB,GAAG,UAAS,cAAc,EAAE,kBAAkB,EAAE,QAAQ;IACtE,IAAI,UAAU,CAAC;IACf,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;IAClC,EAAE,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QAClC,UAAU,GAAG;YACX,OAAO,EAAE,cAAc,CAAC,OAAO;YAC/B,MAAM,EAAE,cAAc,CAAC,MAAM,CAAC,SAAS;YACvC,MAAM,EAAE,cAAc,CAAC,MAAM,CAAC,SAAS;YACvC,MAAM,EAAE,cAAc,CAAC,MAAM,CAAC,SAAS;YACvC,MAAM,EAAE,cAAc,CAAC,MAAM,CAAC,SAAS;SACxC,CAAC;QACF,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,MAAM,CAAC,OAAO,EAAE,cAAc,CAAC,MAAM,CAAC,UAAU,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC;IACpG,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,MAAM,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;AACH,CAAC,CAAC","sourcesContent":["import * as fs from 'fs-extra'\nimport * as path from 'path'\nimport * as _ from 'lodash'\n\n//walk = require('walkdir');\n\nimport * as async from 'async'\n// import * as tmp from 'temporary'\nimport * as shell from 'shelljs'\n\nimport androidResizer from './modules/android'\nimport iOSResizer from './modules/ios'\nimport splitter from './modules/splitter'\n\ngit = require('./modules/git');\n\nutil = require('./utilities');\n\noptions = {};\n\ndefaults = {\n  verbose: false,\n  clean: false,\n  inputDirectory: 'source',\n  outputDirectory: false,\n  os: 'ios',\n  screensDirectory: false,\n  skipResize: false,\n  workflowObject: false,\n  gitMessage: false,\n  gitRoot: false,\n  gitBranch: false,\n  gitPrefix: false,\n  gitRemote: false,\n  gitNoPush: false\n};\n\nexport default function(passedOptions, callback) {\n  var i, inputDetails, inputDirectory, j, k, l, len, len1, len2, len3, osKeys, queue, ref, ref1, ref2, ref3, results, singleObject, workflowObject;\n  if (callback == null) {\n    callback = false;\n  }\n  options = _.defaults(passedOptions, defaults);\n  if (!callback) {\n    callback = function() {};\n  }\n  inputDirectory = util.resolvePath(options.inputDirectory);\n  inputDetails = path.parse(inputDirectory);\n  queue = async.queue(performWorkflow, 1);\n  queue.drain = function() {};\n  if (options.workflowObject || (inputDetails.ext.toLowerCase() === '.json' && _.endsWith(inputDetails.name.toLowerCase(), '.assetpress'))) {\n    if (options.workflowObject) {\n      if (_.isString(options.workflowObject)) {\n        options.workflowObject = JSON.parse(options.workflowObject);\n      }\n      if (_.isArray(options.workflowObject)) {\n        ref = options.workflowObject;\n        for (i = 0, len = ref.length; i < len; i++) {\n          singleObject = ref[i];\n          singleObject.location = path.resolve('..');\n        }\n      } else {\n        options.workflowObject.location = path.resolve('..');\n      }\n    } else {\n      options.workflowObject = require(inputDirectory);\n      if (_.isArray(options.workflowObject)) {\n        ref1 = options.workflowObject;\n        for (j = 0, len1 = ref1.length; j < len1; j++) {\n          singleObject = ref1[j];\n          singleObject.location = inputDetails.dir;\n        }\n      } else {\n        options.workflowObject.location = inputDetails.dir;\n      }\n    }\n    if (_.isArray(options.workflowObject)) {\n      ref2 = options.workflowObject;\n      for (k = 0, len2 = ref2.length; k < len2; k++) {\n        singleObject = ref2[k];\n        singleObject.verbose = options.verbose;\n      }\n    } else {\n      options.workflowObject.verbose = options.verbose;\n    }\n    if (_.isArray(options.workflowObject)) {\n      ref3 = options.workflowObject;\n      results = [];\n      for (l = 0, len3 = ref3.length; l < len3; l++) {\n        singleObject = ref3[l];\n        results.push(queue.push(singleObject));\n      }\n      return results;\n    } else if (_.isObject(options.workflowObject)) {\n      return queue.push(options.workflowObject);\n    }\n  } else {\n    workflowObject = {\n      location: path.resolve('..'),\n      verbose: options.verbose\n    };\n    workflowObject.source = inputDirectory;\n    if (options.os === 'ios') {\n      osKeys = ['iosMinimum', 'iosMaximum', 'iosMinimumPhone', 'iosMaximumPhone', 'iosMinimumPad', 'iosMaximumPad', 'iosXcassets'];\n    } else {\n      osKeys = ['androidLdpi', 'androidXxxhdpi'];\n    }\n    workflowObject.assetpress = _.pick(options, _.union(['verbose', 'os'], osKeys));\n    if (options.skipResize) {\n      delete workflowObject.assetpress;\n    }\n    if (options.screensDirectory) {\n      workflowObject.screens = {\n        destination: util.resolvePath(inputDetails.dir, options.screensDirectory),\n        clean: options.clean\n      };\n    }\n    workflowObject.output = {\n      destination: options.outputDirectory,\n      clean: options.clean\n    };\n    return queue.push(workflowObject);\n  }\n};\n\nperformWorkflow = function(workflowObject, callback) {\n  var androidOptions, completeFunction, iosOptions, outputObject, screensObject, shellOutput, temporaryDirectory, temporaryDirectoryObject, temporarySourceDirectory;\n  workflowObject.source = util.resolvePath(workflowObject.location, workflowObject.source);\n  if (!fs.existsSync(workflowObject.source)) {\n    process.stdout.write(\"Error: Source \" + workflowObject.source + \" does not exist.\\n\");\n    return callback();\n  }\n  outputObject = {\n    destination: util.resolvePath(workflowObject.source, \"../\" + (path.basename(workflowObject.source, '.sketch')) + \" Resources\"),\n    suggestedDestination: true,\n    clean: options.clean\n  };\n  if (workflowObject.output) {\n    if (_.isString(workflowObject.output)) {\n      outputObject = {\n        destination: util.resolvePath(workflowObject.location, workflowObject.output),\n        clean: options.clean\n      };\n    } else if (workflowObject.output.destination && _.isString(workflowObject.output.destination)) {\n      outputObject = workflowObject.output;\n      outputObject.destination = util.resolvePath(workflowObject.location, workflowObject.output.destination);\n      if (!_.has(outputObject, 'clean')) {\n        outputObject.clean = options.clean;\n      }\n    }\n  }\n  if (options.gitMessage) {\n    outputObject.gitMessage = options.gitMessage;\n  }\n  workflowObject.output = outputObject;\n  if (workflowObject.output.destination.indexOf(util.addTrailingSlash(workflowObject.source)) === 0) {\n    process.stdout.write(\"ERROR: output destination is inside source.\\n\");\n    return callback();\n  }\n  temporaryDirectoryObject = new tmp.Dir;\n  temporaryDirectory = util.addTrailingSlash(temporaryDirectoryObject.path);\n  temporarySourceDirectory = temporaryDirectory + 'source';\n  if (fs.lstatSync(workflowObject.source).isDirectory()) {\n    fs.copySync(workflowObject.source, temporarySourceDirectory);\n  } else if (path.extname(workflowObject.source).toLowerCase() === '.sketch') {\n    if (!shell.which('sketchtool')) {\n      process.stdout.write(\"ERROR: Sketchtool is required. Download it from http://bohemiancoding.com/sketch/tool/\\n\");\n      fs.removeSync(temporaryDirectory);\n      return callback();\n    }\n    shellOutput = shell.exec(\"sketchtool export slices --output=\" + (util.escapeShell(temporaryDirectory + 'source')) + \" \" + (util.escapeShell(workflowObject.source)), {\n      silent: !workflowObject.verbose\n    });\n  } else {\n    process.stdout.write(\"ERROR: AssetPress workflow currently only accepts directories and Sketch files as source.\\n\");\n    fs.removeSync(temporaryDirectory);\n    return callback();\n  }\n  if (workflowObject.screens) {\n    screensObject = {\n      source: temporarySourceDirectory,\n      resourcesDestination: '.',\n      screensDestination: util.resolvePath(workflowObject.source, '../Screen Previews'),\n      options: {\n        verbose: workflowObject.verbose,\n        clean: false\n      }\n    };\n    if (_.isString(workflowObject.screens)) {\n      screensObject.screensDestination = util.resolvePath(workflowObject.location, workflowObject.screens);\n    } else {\n      screensObject.screensDestination = util.resolvePath(workflowObject.location, workflowObject.screens.destination);\n      if (_.has(workflowObject.screens, 'clean')) {\n        screensObject.options.clean = workflowObject.screens.clean;\n      }\n    }\n    splitter(screensObject.source, screensObject.resourcesDestination, screensObject.screensDestination, screensObject.options);\n    if (workflowObject.verbose) {\n      process.stdout.write(\"Split screens to \" + screensObject.screensDestination + \".\\n\");\n    }\n  }\n  if (workflowObject.assetpress && _.isObject(workflowObject.assetpress)) {\n    if (!workflowObject.assetpress.os) {\n      process.stdout.write(\"WARNING: Running AssetPress with iOS implied. Please set 'os' value in assetpress object.\\n\");\n      workflowObject.assetpress.os = 'ios';\n    }\n    if (workflowObject.assetpress.os === 'ios' && workflowObject.assetpress.iosXcassets && workflowObject.output.suggestedDestination) {\n      workflowObject.output.destination = util.removeTrailingSlash(outputObject.destination) + '.xcassets';\n    }\n    completeFunction = function() {\n      if (workflowObject.verbose) {\n        process.stdout.write(\"Completed AssetPress for \" + workflowObject.source + \"\\n\");\n      }\n      return completeWorkflow(workflowObject, temporaryDirectory, callback);\n    };\n    switch (workflowObject.assetpress.os) {\n      case 'android':\n        androidOptions = {\n          verbose: workflowObject.verbose,\n          clean: workflowObject.output.clean,\n          ldpi: workflowObject.assetpress.androidLdpi,\n          xxxhdpi: workflowObject.assetpress.androidXxxhdpi\n        };\n        return androidResizer(temporarySourceDirectory, workflowObject.output.destination, androidOptions, completeFunction);\n      case 'ios':\n        iosOptions = {\n          verbose: workflowObject.verbose,\n          clean: workflowObject.output.clean,\n          minimum: workflowObject.assetpress.iosMinimum,\n          maximum: workflowObject.assetpress.iosMaximum,\n          minimumPhone: workflowObject.assetpress.iosMinimumPhone,\n          maximumPhone: workflowObject.assetpress.iosMaximumPhone,\n          minimumPad: workflowObject.assetpress.iosMinimumPad,\n          maximumPad: workflowObject.assetpress.iosMaximumPad,\n          xcassets: workflowObject.assetpress.iosXcassets\n        };\n        return iOSResizer(temporarySourceDirectory, workflowObject.output.destination, iosOptions, completeFunction);\n    }\n  } else {\n    if (!outputObject.suggestedDestination) {\n      util.move(temporarySourceDirectory, workflowObject.output.destination, workflowObject.output.clean);\n      if (workflowObject.verbose) {\n        process.stdout.write(\"Moved output to \" + to.destination + \"\\n\");\n      }\n      return completeWorkflow(workflowObject, temporaryDirectory, callback);\n    } else {\n      fs.removeSync(temporaryDirectory);\n      return callback();\n    }\n  }\n};\n\ncompleteWorkflow = function(workflowObject, temporaryDirectory, callback) {\n  var gitOptions;\n  fs.removeSync(temporaryDirectory);\n  if (workflowObject.output.gitRoot) {\n    gitOptions = {\n      verbose: workflowObject.verbose,\n      branch: workflowObject.output.gitBranch,\n      prefix: workflowObject.output.gitPrefix,\n      remote: workflowObject.output.gitRemote,\n      noPush: workflowObject.output.gitNoPush\n    };\n    return git(workflowObject.output.gitRoot, workflowObject.output.gitMessage, gitOptions, callback);\n  } else {\n    return callback();\n  }\n};\n"]}